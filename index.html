<!DOCTYPE html>
<html>

<head>
    <title>File Upload</title>
    <meta charset="UTF-8">
    <meta name="author" content="Nikhil Bisht,nikhilsinghbisht21@gmail.com">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style type="text/css">
        /*#if_b {
            display: none;
        }*/
    </style>
    <script type="text/javascript">
        var iframe_aa, iframe_ab, iframe_ba, iframe_bb, innerDoc_a, innerDoc_b, ifb, stats;
        ifb = 0;

        function access_a() {
            //This is will be invoked when the first iframe will be loaded in completely
            
            iframe_aa = $("#if_a").contents();  //It will get the contents of first Iframe used to handle events generated in first frame
            iframe_ab = document.getElementById("if_a"); //It will create the object of first frame
            innerDoc_a = iframe_ab.contentDocument || iframe_ab.contentWindow.document; //It will get the contents of first Iframe, which we will use to manipulate the inner contents of the iframe

            iframe_aa.find("#frm").submit(function() {  //This function will be triggered on form submit in first iframe 
                iframe_aa.find("#up_b").hide(); //Hide submit button in first frame
                iframe_aa.find("#im").show();   //Show the loading image in first frame
                iframe_aa.find("#d1").hide();   //hide previous error message if displayed
                iframe_aa.find("#d2").hide();   //hide previous error message if displayed
            });

        }

        function access_b() {
                iframe_ba = $("#if_b").contents();  //It will get the contents of second Iframe used to handle events generated
                iframe_bb = document.getElementById("if_b"); //creating the object of second frame
                innerDoc_b = iframe_bb.contentDocument || iframe_bb.contentWindow.document;  //It will get the contents of secons Iframe, which we will use to get the inner contents of the iframe

                stats = innerDoc_b.getElementById("h1").innerHTML;  //This is get the response text generated by file upload php script

                if (stats == 200) { //If file uplod is successful
                    //iframe_aa.find("#up_a").prop("disabled", true);
                    iframe_aa.find("#im").hide();   //hide loading image in first frame
                    iframe_aa.find("#d1").show();   //Display the file upload successful alert box in first frame
                    ups = 1;
                } else {    //If there is error in file upload
                    iframe_aa.find("#im").hide();   //hide loading image in first frame
                    iframe_aa.find("#up_b").show(); //show submit button in first frame
                    innerDoc_a.getElementById("d21").innerHTML = stats; //placing error generated by php script in error box in first frame
                    iframe_aa.find("#d2").show();   //showing the error box
                }
        }
    </script>
</head>

<body>
    <iframe name="frame_a" id="if_a" frameborder="0" src="upload.html" onload="access_a()" style="height:260px;">
        </iframe>
    <iframe name="frame_b" id="if_b" frameborder="1" onload="access_b()">
        </iframe>
</body>

</html>
